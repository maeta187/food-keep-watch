# 初期開発ロードマップ

開発をスムーズに進めるための推奨ステップを整理しました。状況に応じて調整しつつ、基盤構築から機能拡張まで順序立てて進めてください。

## 1. 環境準備

- `bun install` を実行して依存関係を揃える
- `bunx expo start --web` でアプリを起動し、動作と開発フローを把握する

## 2. 設計整理

- 賞味期限・消費期限管理のユースケースを洗い出す
- Supabase のテーブル構成やフィールド定義を検討し、データモデルをまとめる
- 画面構成（登録・一覧・通知設定など）のラフを作成し、必要なコンポーネントを洗い出す

### ユースケース例

- 食品を新規登録し、賞味期限・消費期限・保管場所・カテゴリー・通知時間を設定する
- 登録済みの食品を編集して期限や通知設定を更新する
- 食品を消費・廃棄として扱い、ステータス変更や完了処理を行う
- カテゴリーや期限が近い順で一覧／カレンダー表示を切り替えて確認する
- 期限前のリマインダー通知を受け取り、通知履歴を参照する
- 匿名ユーザー単位でデータを同期し、端末間で一貫した情報を保持する

### 画面構成案

- 登録画面（仮称：食品登録画面。入力フォームの提供）
  - 食品名、賞味期限/消費期限、期限日、保管場所、カテゴリー、通知時間を入力できる
  - 通知はプッシュ通知とする
- 一覧画面（カテゴリー／期限順ソート、検索・フィルター、バッジ表示）
  - バッジは期限が近いものを表示する
  - 1週間以上前を緑色、1週間前を黄色、3日前を赤色で表示する
  - 表示UIはアイコンもしくは行の色を変える
  - この日数は変更可能にする
- 設定画面（通知既定時間）
- カレンダー画面（期限をカレンダー表示し、日付別の食品を確認）
  - iOSのデフォルトカレンダーと連携できるようにする：こちらを優先する
  - その場合はカレンダー画面は不要とする
- 詳細画面
  - 登録した食品の詳細を確認できる
  - UIは登録画面と同じものとする

## 3. 基盤実装

- nativewind のテーマ設定と共通レイアウトを整える
- Expo Router のナビゲーション構造を最小構成で用意する
- UI 文言を `constants/ui-text.ts` などの定義ファイルに集約する仕組みを導入する

### 登録画面

- 登録画面を実装する
- 入力値を保存できるようにする
- 保存したデータを一覧表示できるようにし、再利用しやすい UI コンポーネントを抽出する
- 食品名、賞味期限/消費期限、期限日、保管場所、カテゴリー、通知時間を入力できるようにする
- 食品名-必須：inputで入力できるようにする
- 賞味期限/消費期限-必須：ラジオボタンで選択できるようにする
- 期限日-必須：date pickerで入力できるようにする
- 保管場所-任意：inputで入力できるようにする
- カテゴリー-任意：inputで選択できるようにし、複数選択できるようにする(タグのようUI)
  - 登録したカテゴリーはカテゴリーごとに保存され以降サジェストされるようにする
  - タグは最大5個まで登録できるようにする
- 通知時間：date time pickerに入力できるようにする
- 保存ボタンを押すとデータを保存できるようにする
- フォームロジックは `react-hook-form` と `zod` を用いて実装し、入力項目は `src/components/register/` 配下のコンポーネントとして切り出す

## 4. データ連携

- Supabase クライアントと型定義をセットアップする（端末内保存を採用する場合は `expo-sqlite` などのローカルストアを候補として比較検討し、判断を記録する）
- 匿名ユーザー管理と端末固有 ID の取得フローを整備する

## 5. コア機能開発

- 期限付きアイテムの登録フォームを実装し、入力値を保存できるようにする
- 保存したデータを一覧表示できるようにし、再利用しやすい UI コンポーネントを抽出する

## 6. 通知・分類機能の拡張

- 登録時に通知時間を設定し、プッシュ通知をスケジュールする処理を実装する
- 食品カテゴリーによる分類とフィルター UI を追加する

## 7. 品質確保

- 重要なロジックに対して近接配置のユニットテストを用意する
- `bun run lint` / `bun run test` を習慣的に実行し、`docs/testing-guidelines.md` に沿ったテスト戦略を更新する

## 8. ドキュメント整備

- 要件から外れる対応や妥協点が生じた場合は README や docs に理由と判断を記録する
- ボーイスカウトルールを意識して、改善や知見を継続的に反映する
