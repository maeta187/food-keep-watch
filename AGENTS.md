# リポジトリガイドライン

## 適用範囲

これらの指示はリポジトリ全体に適用されます。

## プロジェクト概要

- 本プロジェクトは TypeScript で記述された Expo Router React Native アプリです。
- スタイリングは `nativewind` を通じて Tailwind ユーティリティクラスを使用します。可能な限りインラインスタイルではなくユーティリティクラスを優先してください。

## 言語方針

- アプリ内のユーザー向け文言および通知は当面日本語に固定し、日本語体験を優先的に整えます。
- 後から多言語化しやすいように、文言は `constants/ui-text.ts` などの定義ファイルで一元管理します。
- iOS のシステムUIを日本語化するため、`app.json` の `ios.supportedLocales` と `ios.infoPlist.CFBundleDevelopmentRegion` は `ja` を指定した状態を保ちます。

## 機能要件

- 賞味期限・消費期限を登録し、管理できること。
- 入力した情報は一覧またはカレンダー表示で確認できること（必要に応じて純正カレンダーアプリとの連携を検討する）。
- 登録時に通知時間を設定し、プッシュ通知で期限を知らせること。
- 食品カテゴリーを設け、分類して管理できること。
- データベースには Supabase を利用する。
- 対応プラットフォームは iOS のみとする。
- 初期段階では匿名ユーザーと端末固有IDで管理し、必要に応じてサインイン機能を追加する。

## このプロジェクトを開発する人について

- React と TypeScript による開発経験があり、Tailwind ユーティリティクラスやデザインシステムを意識した実装ができます。
- Expo と React Native には触れ始めた段階で、これらの技術領域でのサポートを必要としています。

## コードスタイル

- パッケージ管理とスクリプト実行は Bun を用い、`bun run` / `bunx` コマンドで統一してください。
- クラスコンポーネントではなくフックを用いた関数コンポーネントを基本とします。
- コンポーネントは小さく焦点を絞り、可読性が向上する場合は `/app` や隣接する `/index.ts` にヘルパーを抽出してください。
- props や state には TypeScript の型またはインターフェースを使用し、特に公開する関数やコンポーネントには明示的な型を付けてください。
- 非同期コードを変更する場合は生の Promise ではなく `async/await` を使用してください。
- 既に default export を使用しているファイルを除き、default export は新たに追加しないでください。
- コード整形は `bun run format`（Prettier）、静的解析は `bun run lint`（ESLint）を利用し、警告はコミット前に解消してください。

## アセットとスタイリング

- 新しい画像や静的アセットは `assets/` ディレクトリに配置し、ファイル名はケバブケースにしてください。
- Tailwind ユーティリティクラスを追加するときは、レイアウト・余白・タイポグラフィなど意味の近いものをまとめて記述してください。

## テストと検証

- 機能に影響する変更を加えた場合は、依存関係を変更したときに `bun install` を一度実行し、ローカル検証には `bunx expo start --web` を使用してください。
- ユニットテスト可能なロジックを追加した場合は、`.test.ts` サフィックスのテストファイルを近接配置してください。

## ドキュメントとコメント

- 重要なビジネスロジックには意図を簡潔に説明するコメントを付記してください。
- ユーザーに見える挙動が変化した場合は README やアプリ内ドキュメントを更新してください。

## Git と PR

- コミットメッセージは Gitmoji のガイドラインに従い、先頭に適切な絵文字を付けてください（参考: https://gitmoji.dev/ ）。
- 絵文字とコミットメッセージの間にはコロンを付けてください（例: 🎉: 機能を追加する）。
- コミットメッセージは現在形で書いてください（例: 「機能を追加する」）。
- 要約は簡潔にし、主な変更点に触れてください。
- 機能追加・バグ修正・リファクタリング・設定変更、Lint、フォーマットなど目的ごとにコミットを分け、混在させないでください。

## 言語に関する注意

- 指示はすべて日本語で記載されています。矛盾や疑問がある場合も日本語で確認してください。
- この環境で回答する際は、常に日本語で応答してください。
